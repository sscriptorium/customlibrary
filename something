-- [Modified version - Box-like Linoria Style with Autosave]
-- [Based on Hyperion UI Library]

if not game:IsLoaded() then
	game.Loaded:Wait()
end

local LocalPlayer = game:GetService('Players').LocalPlayer
local Tween = game:GetService('TweenService')
local Run = game:GetService('RunService')
local Core = (gethui and gethui()) or game:FindFirstChild'CoreGui' or LocalPlayer.PlayerGui
local UIS = game:GetService('UserInputService')
local TextService = game:GetService('TextService')
local HttpService = game:GetService('HttpService')
local ProtectGui = protectgui or (syn and syn.protect_gui) or (function() end)

-- Config System
local ConfigSystem = {
	CurrentConfig = {},
	ConfigFolder = "LinoriaBox_Configs",
	AutoSaveEnabled = true,
	AutoSaveInterval = 30
}

local function SaveConfig(name)
	name = name or "default"
	local success, err = pcall(function()
		if not isfolder(ConfigSystem.ConfigFolder) then
			makefolder(ConfigSystem.ConfigFolder)
		end
		local configPath = ConfigSystem.ConfigFolder .. "/" .. name .. ".json"
		writefile(configPath, HttpService:JSONEncode(ConfigSystem.CurrentConfig))
	end)
	return success
end

local function LoadConfig(name)
	name = name or "default"
	local success, data = pcall(function()
		local configPath = ConfigSystem.ConfigFolder .. "/" .. name .. ".json"
		if isfile(configPath) then
			return HttpService:JSONDecode(readfile(configPath))
		end
		return nil
	end)
	if success and data then
		ConfigSystem.CurrentConfig = data
		return data
	end
	return nil
end

local function cretate_button(asd)
	local button = Instance.new('TextButton')
	button.Size = UDim2.new(1,0,1,0)
	button.BackgroundTransparency = 1
	button.TextTransparency = 1
	button.Text = ""
	button.Parent = asd
	button.ZIndex = 5000
	return button
end

local function ToDefault(val,def)
	return val or def
end

local LinoriaBox = {
	Theme = {
		BACKGROUND = Color3.fromRGB(20, 20, 25),
		SECTION = Color3.fromRGB(25, 25, 30),
		MAIN = Color3.fromRGB(160, 120, 255),
		STROKE = Color3.fromRGB(60, 60, 70),
		TOUCH = Color3.fromRGB(140, 100, 235),
		SYSTEM = Color3.fromRGB(180, 140, 255),
		BOX_ACCENT = Color3.fromRGB(45, 45, 55)
	},
	AutoUpdate = {},
	SectionWidth = 0.98
}

function LinoriaBox.set_theme(name:string)
	if name:lower() == 'linoria' then
		LinoriaBox.Theme.BACKGROUND = Color3.fromRGB(20, 20, 25)
		LinoriaBox.Theme.SECTION = Color3.fromRGB(25, 25, 30)
		LinoriaBox.Theme.MAIN = Color3.fromRGB(160, 120, 255)
		LinoriaBox.Theme.STROKE = Color3.fromRGB(60, 60, 70)
		LinoriaBox.Theme.TOUCH = Color3.fromRGB(140, 100, 235)
		LinoriaBox.Theme.SYSTEM = Color3.fromRGB(180, 140, 255)
		LinoriaBox.Theme.BOX_ACCENT = Color3.fromRGB(45, 45, 55)
	elseif name:lower() == 'dark' then
		LinoriaBox.Theme.BACKGROUND = Color3.fromRGB(15, 15, 18)
		LinoriaBox.Theme.SECTION = Color3.fromRGB(20, 20, 25)
		LinoriaBox.Theme.MAIN = Color3.fromRGB(100, 150, 255)
		LinoriaBox.Theme.STROKE = Color3.fromRGB(50, 50, 60)
		LinoriaBox.Theme.TOUCH = Color3.fromRGB(80, 130, 235)
		LinoriaBox.Theme.SYSTEM = Color3.fromRGB(120, 170, 255)
		LinoriaBox.Theme.BOX_ACCENT = Color3.fromRGB(35, 35, 45)
	elseif name:lower() == 'green' then
		LinoriaBox.Theme.BACKGROUND = Color3.fromRGB(18, 22, 20)
		LinoriaBox.Theme.SECTION = Color3.fromRGB(23, 28, 25)
		LinoriaBox.Theme.MAIN = Color3.fromRGB(100, 220, 150)
		LinoriaBox.Theme.STROKE = Color3.fromRGB(50, 65, 55)
		LinoriaBox.Theme.TOUCH = Color3.fromRGB(80, 200, 130)
		LinoriaBox.Theme.SYSTEM = Color3.fromRGB(120, 240, 170)
		LinoriaBox.Theme.BOX_ACCENT = Color3.fromRGB(35, 45, 40)
	end
end

local function Signal(list:{{name:string,callback:FunctionalTest}})
	local k = {}

	for i,v in ipairs(list) do
		k[v.name] = v.callback
	end

	return k
end

local function scrolling_connect(scrollframe:ScrollingFrame)
	task.spawn(function()
		local addres = 45
		local UIListLayout:UIListLayout = scrollframe:WaitForChild('UIListLayout',9999999)
		scrollframe.CanvasSize = UDim2.new(0,0,0,UIListLayout.AbsoluteContentSize.Y+addres)

		UIListLayout:GetPropertyChangedSignal('AbsoluteContentSize'):Connect(function()
			scrollframe.CanvasSize = UDim2.new(0,0,0,UIListLayout.AbsoluteContentSize.Y+addres)
		end)
	end)
end

local function SetImage(name:string,image:ImageLabel)
	name = name or "ADS"
	name = name:lower()

	local NigImage = "rbxassetid://3926305904"

	if name == "ads" then
		image.Image = NigImage
		image.ImageRectOffset = Vector2.new(205,565)
		image.ImageRectSize = Vector2.new(35,35)
		return
	end

	if name == "list" then
		image.Image = NigImage
		image.ImageRectOffset = Vector2.new(485,205)
		image.ImageRectSize = Vector2.new(35,35)
		return
	end

	if name == "folder" then
		image.Image = NigImage
		image.ImageRectOffset = Vector2.new(805,45)
		image.ImageRectSize = Vector2.new(35,35)
		return
	end

	if name == "earth" then
		image.Image = NigImage
		image.ImageRectOffset = Vector2.new(604,324)
		image.ImageRectSize = Vector2.new(35,35)
		return
	end

	if name == "locked" then
		image.Image = NigImage
		image.ImageRectOffset = Vector2.new(524, 644)
		image.ImageRectSize = Vector2.new(35,35)
		return
	end

	if name == "home" then
		image.Image = NigImage
		image.ImageRectOffset = Vector2.new(964, 205)
		image.ImageRectSize = Vector2.new(35,35)
		return
	end

	if name == "positon" or name == 'gps' then
		image.Image = NigImage
		image.ImageRectOffset = Vector2.new(325, 565)
		image.ImageRectSize = Vector2.new(35,35)
		return
	end

	if name == "notify" or name == 'notification' then
		image.Image = NigImage
		image.ImageRectOffset = Vector2.new(325, 565)
		image.ImageRectSize = Vector2.new(35,35)
		return
	end

	if name == "close" or name == 'no' then
		image.Image = NigImage
		image.ImageRectOffset = Vector2.new(284, 4)
		image.ImageRectSize = Vector2.new(24, 24)
		return
	end

	if name == "color" then
		image.Image = NigImage
		image.ImageRectOffset = Vector2.new(44, 964)
		image.ImageRectSize = Vector2.new(36, 36)
		return
	end

	image.ImageRectOffset = Vector2.new(0,0)
	image.ImageRectSize = Vector2.new(0,0)

	if name == "settings" then
		image.Image = "rbxassetid://7734053495"
	end

	if name == "smartphone" then
		image.Image = "rbxassetid://7734058979"
	end

	if name == "crown" then
		image.Image = "rbxassetid://7733765398"
	end

	if name == "save" then
		image.Image = "rbxassetid://7734052335"
	end

	if name == "hash" then
		image.Image = "rbxassetid://7733955740"
	end

	if name == "server" then
		image.Image = "rbxassetid://7734053426"
	end

	if name == "option" then
		image.Image = "rbxassetid://7734021300"
	end

	if name == "link" then
		image.Image = "rbxassetid://7733978098"
	end

	if name == "copy" then
		image.Image = "rbxassetid://7733764083"
	end

	if name == "cpu" then
		image.Image = "rbxassetid://7733765045"
	end

	if name == "moon" then
		image.Image = "rbxassetid://7743870134"
	end

	if name == "wallet" then
		image.Image = "rbxassetid://7743877573"
	end
end

function LinoriaBox.new(WindowName,WindowLogo,WindowDescription)
	local BoxWindow = {
		Tabs = {},
		Size = UDim2.new(0, 600, 0, 400),
		Toggle = Enum.KeyCode.LeftControl,
		ConfigName = "default"
	}

	WindowName = ToDefault(WindowName,'LinoriaBox UI')
	WindowLogo = ToDefault(WindowLogo,'http://www.roblox.com/asset/?id=16530565354')
	WindowDescription = ToDefault(WindowDescription,'Box-style UI Library')

	local LinoriaUI = Instance.new("ScreenGui")
	local MainFrame = Instance.new("Frame")
	local Frame = Instance.new("Frame")
	local UICorner = Instance.new("UICorner")
	local UIStroke = Instance.new("UIStroke")
	
	local TopBar = Instance.new("Frame")
	local TopBarLine = Instance.new("Frame")
	local LogoHub = Instance.new("ImageLabel")
	local MainText = Instance.new("TextLabel")
	local DescriptionText = Instance.new("TextLabel")
	local CloseButton = Instance.new("ImageButton")
	
	local TabButtonList = Instance.new("Frame")
	local ScrollingFrame = Instance.new("ScrollingFrame")
	local UIListLayout_2 = Instance.new("UIListLayout")
	local TabSystem = Instance.new("Frame")
	
	local DropShadow = Instance.new("ImageLabel")

	LinoriaUI:GetPropertyChangedSignal('Enabled'):Connect(function()
		if not LinoriaUI.Enabled then
			LinoriaUI.Enabled = true
		end
	end)

	BoxWindow.ScreenSource = LinoriaUI

	LinoriaUI.Name = tostring("ui.protect.")..tostring(math.random(1,100))..tostring(Random.new():NextNumber(0.1,0.9))
	LinoriaUI.Parent = Core
	LinoriaUI.ResetOnSpawn = false
	LinoriaUI.IgnoreGuiInset = true
	LinoriaUI.ZIndexBehavior = Enum.ZIndexBehavior.Global
	ProtectGui(LinoriaUI)

	MainFrame.Name = "MainFrame"
	MainFrame.Parent = LinoriaUI
	MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
	MainFrame.BackgroundColor3 = LinoriaBox.Theme.BACKGROUND
	MainFrame.BackgroundTransparency = 1.000
	MainFrame.BorderColor3 = Color3.fromRGB(0, 0, 0)
	MainFrame.BorderSizePixel = 0
	MainFrame.ClipsDescendants = true
	MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
	MainFrame.Size = BoxWindow.Size
	MainFrame.Active = true

	Frame.Parent = MainFrame
	Frame.BackgroundColor3 = LinoriaBox.Theme.BACKGROUND
	Frame.BorderColor3 = Color3.fromRGB(0, 0, 0)
	Frame.BorderSizePixel = 0
	Frame.Size = UDim2.new(1, 0, 1, 0)
	Frame.Position = UDim2.fromScale(-1,0)
	Frame.ClipsDescendants = true

	UICorner.Parent = Frame
	UICorner.CornerRadius = UDim.new(0, 6)

	UIStroke.Parent = Frame
	UIStroke.Color = LinoriaBox.Theme.STROKE
	UIStroke.Thickness = 2
	UIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

	-- Top Bar (Box Style)
	TopBar.Name = "TopBar"
	TopBar.Parent = Frame
	TopBar.BackgroundColor3 = LinoriaBox.Theme.BOX_ACCENT
	TopBar.BorderSizePixel = 0
	TopBar.Size = UDim2.new(1, 0, 0, 35)
	TopBar.Position = UDim2.new(0, 0, 0, 0)

	TopBarLine.Name = "TopBarLine"
	TopBarLine.Parent = TopBar
	TopBarLine.BackgroundColor3 = LinoriaBox.Theme.MAIN
	TopBarLine.BorderSizePixel = 0
	TopBarLine.Size = UDim2.new(1, 0, 0, 2)
	TopBarLine.Position = UDim2.new(0, 0, 1, 0)

	LogoHub.Name = "LogoHub"
	LogoHub.Parent = TopBar
	LogoHub.AnchorPoint = Vector2.new(0, 0.5)
	LogoHub.BackgroundTransparency = 1
	LogoHub.Position = UDim2.new(0, 8, 0.5, 0)
	LogoHub.Size = UDim2.new(0, 24, 0, 24)
	LogoHub.Image = tostring(WindowLogo)
	LogoHub.ScaleType = Enum.ScaleType.Fit
	LogoHub.ImageTransparency = 1

	MainText.Name = "MainText"
	MainText.Parent = TopBar
	MainText.BackgroundTransparency = 1
	MainText.Position = UDim2.new(0, 38, 0, 0)
	MainText.Size = UDim2.new(0, 250, 0, 20)
	MainText.Font = Enum.Font.GothamBold
	MainText.Text = tostring(WindowName)
	MainText.TextColor3 = Color3.fromRGB(255, 255, 255)
	MainText.TextSize = 14
	MainText.TextXAlignment = Enum.TextXAlignment.Left
	MainText.TextTransparency = 1

	DescriptionText.Name = "DescriptionText"
	DescriptionText.Parent = TopBar
	DescriptionText.BackgroundTransparency = 1
	DescriptionText.Position = UDim2.new(0, 38, 0, 18)
	DescriptionText.Size = UDim2.new(0, 250, 0, 14)
	DescriptionText.Font = Enum.Font.Gotham
	DescriptionText.Text = tostring(WindowDescription)
	DescriptionText.TextColor3 = Color3.fromRGB(180, 180, 180)
	DescriptionText.TextSize = 11
	DescriptionText.TextXAlignment = Enum.TextXAlignment.Left
	DescriptionText.TextTransparency = 1

	CloseButton.Name = "CloseButton"
	CloseButton.Parent = TopBar
	CloseButton.AnchorPoint = Vector2.new(1, 0.5)
	CloseButton.BackgroundTransparency = 1
	CloseButton.Position = UDim2.new(1, -8, 0.5, 0)
	CloseButton.Size = UDim2.new(0, 20, 0, 20)
	CloseButton.Image = "rbxassetid://10002398990"
	CloseButton.ImageTransparency = 1

	TabButtonList.Name = "TabButtonList"
	TabButtonList.Parent = Frame
	TabButtonList.BackgroundColor3 = LinoriaBox.Theme.SECTION
	TabButtonList.BorderSizePixel = 0
	TabButtonList.Position = UDim2.new(0, 8, 0, 45)
	TabButtonList.Size = UDim2.new(0, 130, 1, -53)
	TabButtonList.ClipsDescendants = true

	local TabStroke = Instance.new("UIStroke")
	TabStroke.Parent = TabButtonList
	TabStroke.Color = LinoriaBox.Theme.STROKE
	TabStroke.Thickness = 1

	local TabCorner = Instance.new("UICorner")
	TabCorner.Parent = TabButtonList
	TabCorner.CornerRadius = UDim.new(0, 4)

	ScrollingFrame.Parent = TabButtonList
	ScrollingFrame.Active = true
	ScrollingFrame.BackgroundTransparency = 1
	ScrollingFrame.Position = UDim2.new(0, 4, 0, 4)
	ScrollingFrame.Size = UDim2.new(1, -8, 1, -8)
	ScrollingFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
	ScrollingFrame.ScrollBarThickness = 4
	ScrollingFrame.ScrollBarImageColor3 = LinoriaBox.Theme.MAIN

	UIListLayout_2.Parent = ScrollingFrame
	UIListLayout_2.SortOrder = Enum.SortOrder.LayoutOrder
	UIListLayout_2.Padding = UDim.new(0, 4)

	scrolling_connect(ScrollingFrame)

	TabSystem.Name = "TabSystem"
	TabSystem.Parent = Frame
	TabSystem.BackgroundTransparency = 1
	TabSystem.Position = UDim2.new(0, 146, 0, 45)
	TabSystem.Size = UDim2.new(1, -154, 1, -53)
	TabSystem.ClipsDescendants = true

	DropShadow.Name = "DropShadow"
	DropShadow.Parent = Frame
	DropShadow.AnchorPoint = Vector2.new(0.5, 0.5)
	DropShadow.BackgroundTransparency = 1
	DropShadow.Position = UDim2.new(0.5, 0, 0.5, 0)
	DropShadow.Size = UDim2.new(1, 47, 1, 47)
	DropShadow.ZIndex = 0
	DropShadow.Image = "rbxassetid://6015897843"
	DropShadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
	DropShadow.ImageTransparency = 1
	DropShadow.ScaleType = Enum.ScaleType.Slice
	DropShadow.SliceCenter = Rect.new(49, 49, 450, 450)

	local cs = Tween:Create(Frame,TweenInfo.new(0.5),{
		Position = UDim2.fromScale(0,0)
	})

	cs:Play()
	cs.Completed:Connect(function()
		Tween:Create(DropShadow,TweenInfo.new(1),{
			ImageTransparency = 0.4,
		}):Play()
	end)

	delay(0.3,function()
		Tween:Create(CloseButton,TweenInfo.new(0.3),{ImageTransparency = 0}):Play()
		Tween:Create(DescriptionText,TweenInfo.new(0.3),{TextTransparency = 0.3}):Play()
		Tween:Create(MainText,TweenInfo.new(0.3),{TextTransparency = 0}):Play()
		Tween:Create(LogoHub,TweenInfo.new(0.3),{ImageTransparency = 0}):Play()
	end)

	-- Auto-save system
	if ConfigSystem.AutoSaveEnabled then
		task.spawn(function()
			while wait(ConfigSystem.AutoSaveInterval) do
				SaveConfig(BoxWindow.ConfigName)
			end
		end)
	end

	function BoxWindow:NewTab(TabName:string,TabIcon:string)
		local TabBox = {
			Section = {}
		}

		local TabButton = Instance.new("TextButton")
		local TabIcon_img = Instance.new("ImageLabel")
		local TabLabel = Instance.new("TextLabel")

		TabButton.Name = TabName or "TabButton"
		TabButton.Parent = ScrollingFrame
		TabButton.BackgroundColor3 = LinoriaBox.Theme.BACKGROUND
		TabButton.BackgroundTransparency = 1
		TabButton.BorderSizePixel = 0
		TabButton.Size = UDim2.new(1, 0, 0, 32)
		TabButton.Font = Enum.Font.Gotham
		TabButton.Text = ""
		TabButton.TextColor3 = Color3.fromRGB(255, 255, 255)

		local TabButtonCorner = Instance.new("UICorner")
		TabButtonCorner.Parent = TabButton
		TabButtonCorner.CornerRadius = UDim.new(0, 4)

		TabIcon_img.Name = "Icon"
		TabIcon_img.Parent = TabButton
		TabIcon_img.BackgroundTransparency = 1
		TabIcon_img.Position = UDim2.new(0, 8, 0.5, -8)
		TabIcon_img.Size = UDim2.new(0, 16, 0, 16)
		SetImage(TabIcon,TabIcon_img)

		TabLabel.Name = "Label"
		TabLabel.Parent = TabButton
		TabLabel.BackgroundTransparency = 1
		TabLabel.Position = UDim2.new(0, 30, 0, 0)
		TabLabel.Size = UDim2.new(1, -35, 1, 0)
		TabLabel.Font = Enum.Font.GothamMedium
		TabLabel.Text = TabName or "Tab"
		TabLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
		TabLabel.TextSize = 13
		TabLabel.TextXAlignment = Enum.TextXAlignment.Left

		local TabFrame = Instance.new("ScrollingFrame")
		local LeftFrame = Instance.new("Frame")
		local RightFrame = Instance.new("Frame")
		local UIListLayout = Instance.new("UIListLayout")
		local UIListLayout_2 = Instance.new("UIListLayout")

		TabFrame.Name = "TabFrame"
		TabFrame.Parent = TabSystem
		TabFrame.Active = true
		TabFrame.BackgroundTransparency = 1
		TabFrame.BorderSizePixel = 0
		TabFrame.Size = UDim2.new(1, 0, 1, 0)
		TabFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
		TabFrame.ScrollBarThickness = 4
		TabFrame.ScrollBarImageColor3 = LinoriaBox.Theme.MAIN
		TabFrame.Visible = false

		LeftFrame.Name = "LeftFrame"
		LeftFrame.Parent = TabFrame
		LeftFrame.BackgroundTransparency = 1
		LeftFrame.Position = UDim2.new(0, 0, 0, 0)
		LeftFrame.Size = UDim2.new(0.48, 0, 1, 0)

		UIListLayout.Parent = LeftFrame
		UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
		UIListLayout.Padding = UDim.new(0, 8)

		RightFrame.Name = "RightFrame"
		RightFrame.Parent = TabFrame
		RightFrame.BackgroundTransparency = 1
		RightFrame.Position = UDim2.new(0.52, 0, 0, 0)
		RightFrame.Size = UDim2.new(0.48, 0, 1, 0)

		UIListLayout_2.Parent = RightFrame
		UIListLayout_2.SortOrder = Enum.SortOrder.LayoutOrder
		UIListLayout_2.Padding = UDim.new(0, 8)

		local call = function(val)
			if val then
				TabFrame.Visible = true
				Tween:Create(TabButton,TweenInfo.new(0.15),{BackgroundTransparency = 0, BackgroundColor3 = LinoriaBox.Theme.TOUCH}):Play()
				Tween:Create(TabLabel,TweenInfo.new(0.15),{TextColor3 = Color3.fromRGB(255, 255, 255)}):Play()
				Tween:Create(TabIcon_img,TweenInfo.new(0.15),{ImageColor3 = LinoriaBox.Theme.MAIN}):Play()
			else
				TabFrame.Visible = false
				Tween:Create(TabButton,TweenInfo.new(0.15),{BackgroundTransparency = 1}):Play()
				Tween:Create(TabLabel,TweenInfo.new(0.15),{TextColor3 = Color3.fromRGB(200, 200, 200)}):Play()
				Tween:Create(TabIcon_img,TweenInfo.new(0.15),{ImageColor3 = Color3.fromRGB(255, 255, 255)}):Play()
			end
		end

		if not BoxWindow.Tabs[1] then
			task.spawn(call,true)
		else
			task.spawn(call,false)
		end

		table.insert(BoxWindow.Tabs,{
			TabFrame,
			call
		})

		TabButton.MouseButton1Click:Connect(function()
			for i,v in ipairs(BoxWindow.Tabs) do
				if v[1] == TabFrame then
					task.spawn(v[2],true)
				else
					task.spawn(v[2],false)
				end
			end
		end)

		function TabBox:NewSection(SectionName:string,SectionIcon:string,Position:string)
			local Section_Box = {}

			SectionName = ToDefault(SectionName,'Section')
			SectionIcon = ToDefault(SectionIcon,'home')
			Position = (Position and (Position:lower():find('left') and LeftFrame) or RightFrame) or LeftFrame

			local Section = Instance.new("Frame")
			local SectionHeader = Instance.new("Frame")
			local SectionTitle = Instance.new("TextLabel")
			local SectionIcon_img = Instance.new("ImageLabel")
			local SectionContent = Instance.new("Frame")
			local UIListLayout = Instance.new("UIListLayout")

			Section.Name = "Section"
			Section.Parent = Position
			Section.BackgroundColor3 = LinoriaBox.Theme.SECTION
			Section.BorderSizePixel = 0
			Section.Size = UDim2.new(1, 0, 0, 40)

			local SectionCorner = Instance.new("UICorner")
			SectionCorner.Parent = Section
			SectionCorner.CornerRadius = UDim.new(0, 4)

			local SectionStroke = Instance.new("UIStroke")
			SectionStroke.Parent = Section
			SectionStroke.Color = LinoriaBox.Theme.STROKE
			SectionStroke.Thickness = 1

			SectionHeader.Name = "SectionHeader"
			SectionHeader.Parent = Section
			SectionHeader.BackgroundColor3 = LinoriaBox.Theme.BOX_ACCENT
			SectionHeader.BorderSizePixel = 0
			SectionHeader.Size = UDim2.new(1, 0, 0, 28)

			local HeaderCorner = Instance.new("UICorner")
			HeaderCorner.Parent = SectionHeader
			HeaderCorner.CornerRadius = UDim.new(0, 4)

			local HeaderLine = Instance.new("Frame")
			HeaderLine.Parent = SectionHeader
			HeaderLine.BackgroundColor3 = LinoriaBox.Theme.MAIN
			HeaderLine.BorderSizePixel = 0
			HeaderLine.Position = UDim2.new(0, 0, 1, -1)
			HeaderLine.Size = UDim2.new(1, 0, 0, 1)

			SectionIcon_img.Name = "Icon"
			SectionIcon_img.Parent = SectionHeader
			SectionIcon_img.BackgroundTransparency = 1
			SectionIcon_img.Position = UDim2.new(0, 8, 0.5, -8)
			SectionIcon_img.Size = UDim2.new(0, 16, 0, 16)
			SectionIcon_img.ImageColor3 = LinoriaBox.Theme.MAIN
			SetImage(SectionIcon,SectionIcon_img)

			SectionTitle.Name = "SectionTitle"
			SectionTitle.Parent = SectionHeader
			SectionTitle.BackgroundTransparency = 1
			SectionTitle.Position = UDim2.new(0, 30, 0, 0)
			SectionTitle.Size = UDim2.new(1, -35, 1, 0)
			SectionTitle.Font = Enum.Font.GothamBold
			SectionTitle.Text = SectionName
			SectionTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
			SectionTitle.TextSize = 13
			SectionTitle.TextXAlignment = Enum.TextXAlignment.Left

			SectionContent.Name = "SectionContent"
			SectionContent.Parent = Section
			SectionContent.BackgroundTransparency = 1
			SectionContent.Position = UDim2.new(0, 0, 0, 28)
			SectionContent.Size = UDim2.new(1, 0, 1, -28)

			UIListLayout.Parent = SectionContent
			UIListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
			UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
			UIListLayout.Padding = UDim.new(0, 6)

			function Section_Box.update()
				local old = 28

				for i,v in ipairs(SectionContent:GetChildren()) do
					if v:IsA('Frame') then
						old += (v.AbsoluteSize.Y or 0) + UIListLayout.Padding.Offset
					end
				end

				Section.Size = UDim2.new(1, 0, 0, old + 8)
			end

			table.insert(LinoriaBox.AutoUpdate,Section_Box.update)

			function Section_Box.text(...)
				SectionTitle.Text = tostring(...)
			end

			function Section_Box:AddButton(ButtonName,callback)
				local configKey = "Button_" .. ButtonName

				local ButtonFrame = Instance.new("Frame")
				local Button = Instance.new("TextButton")
				local ButtonLabel = Instance.new("TextLabel")

				ButtonFrame.Name = "Button"
				ButtonFrame.Parent = SectionContent
				ButtonFrame.BackgroundTransparency = 1
				ButtonFrame.Size = UDim2.new(0.95, 0, 0, 28)

				Button.Parent = ButtonFrame
				Button.BackgroundColor3 = LinoriaBox.Theme.BACKGROUND
				Button.BorderSizePixel = 0
				Button.Size = UDim2.new(1, 0, 1, 0)
				Button.Font = Enum.Font.Gotham
				Button.Text = ""

				local ButtonCorner = Instance.new("UICorner")
				ButtonCorner.Parent = Button
				ButtonCorner.CornerRadius = UDim.new(0, 4)

				local ButtonStroke = Instance.new("UIStroke")
				ButtonStroke.Parent = Button
				ButtonStroke.Color = LinoriaBox.Theme.STROKE
				ButtonStroke.Thickness = 1

				ButtonLabel.Parent = Button
				ButtonLabel.BackgroundTransparency = 1
				ButtonLabel.Size = UDim2.new(1, 0, 1, 0)
				ButtonLabel.Font = Enum.Font.GothamMedium
				ButtonLabel.Text = ButtonName
				ButtonLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
				ButtonLabel.TextSize = 12

				Button.MouseEnter:Connect(function()
					Tween:Create(Button,TweenInfo.new(0.1),{BackgroundColor3 = LinoriaBox.Theme.TOUCH}):Play()
					Tween:Create(ButtonLabel,TweenInfo.new(0.1),{TextColor3 = Color3.fromRGB(255, 255, 255)}):Play()
				end)

				Button.MouseLeave:Connect(function()
					Tween:Create(Button,TweenInfo.new(0.1),{BackgroundColor3 = LinoriaBox.Theme.BACKGROUND}):Play()
					Tween:Create(ButtonLabel,TweenInfo.new(0.1),{TextColor3 = Color3.fromRGB(200, 200, 200)}):Play()
				end)

				Button.MouseButton1Click:Connect(callback or function() end)

				Section_Box.update()

				return Signal({
					{
						name = 'Text',
						callback = function(...)
							ButtonLabel.Text = tostring(...)
						end,
					},
					{
						name = 'Fire',
						callback = callback,
					}
				})
			end

			function Section_Box:AddToggle(ToggleName:string,Default:boolean,callback:FunctionalTest)
				Default = Default or false
				callback = ToDefault(callback,function() end)

				local configKey = "Toggle_" .. ToggleName

				-- Load from config
				if ConfigSystem.CurrentConfig[configKey] ~= nil then
					Default = ConfigSystem.CurrentConfig[configKey]
				end

				local ToggleFrame = Instance.new("Frame")
				local ToggleLabel = Instance.new("TextLabel")
				local ToggleBox = Instance.new("Frame")
				local ToggleButton = Instance.new("TextButton")
				local ToggleCheck = Instance.new("ImageLabel")

				ToggleFrame.Name = "Toggle"
				ToggleFrame.Parent = SectionContent
				ToggleFrame.BackgroundTransparency = 1
				ToggleFrame.Size = UDim2.new(0.95, 0, 0, 24)

				ToggleLabel.Parent = ToggleFrame
				ToggleLabel.BackgroundTransparency = 1
				ToggleLabel.Position = UDim2.new(0, 0, 0, 0)
				ToggleLabel.Size = UDim2.new(1, -30, 1, 0)
				ToggleLabel.Font = Enum.Font.Gotham
				ToggleLabel.Text = ToggleName or "Toggle"
				ToggleLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
				ToggleLabel.TextSize = 12
				ToggleLabel.TextXAlignment = Enum.TextXAlignment.Left

				ToggleBox.Name = "Box"
				ToggleBox.Parent = ToggleFrame
				ToggleBox.AnchorPoint = Vector2.new(1, 0.5)
				ToggleBox.BackgroundColor3 = LinoriaBox.Theme.BACKGROUND
				ToggleBox.BorderSizePixel = 0
				ToggleBox.Position = UDim2.new(1, 0, 0.5, 0)
				ToggleBox.Size = UDim2.new(0, 18, 0, 18)

				local BoxCorner = Instance.new("UICorner")
				BoxCorner.Parent = ToggleBox
				BoxCorner.CornerRadius = UDim.new(0, 3)

				local BoxStroke = Instance.new("UIStroke")
				BoxStroke.Parent = ToggleBox
				BoxStroke.Color = LinoriaBox.Theme.STROKE
				BoxStroke.Thickness = 1

				ToggleCheck.Name = "Check"
				ToggleCheck.Parent = ToggleBox
				ToggleCheck.BackgroundTransparency = 1
				ToggleCheck.Size = UDim2.new(1, 0, 1, 0)
				ToggleCheck.Image = "rbxassetid://3944680095"
				ToggleCheck.Visible = false

				ToggleButton.Parent = ToggleFrame
				ToggleButton.BackgroundTransparency = 1
				ToggleButton.Size = UDim2.new(1, 0, 1, 0)
				ToggleButton.Text = ""
				ToggleButton.ZIndex = 10

				local function Effect(val)
					if val then
						ToggleCheck.Visible = true
						Tween:Create(ToggleBox,TweenInfo.new(0.1),{BackgroundColor3 = LinoriaBox.Theme.MAIN}):Play()
						Tween:Create(BoxStroke,TweenInfo.new(0.1),{Color = LinoriaBox.Theme.MAIN}):Play()
					else
						ToggleCheck.Visible = false
						Tween:Create(ToggleBox,TweenInfo.new(0.1),{BackgroundColor3 = LinoriaBox.Theme.BACKGROUND}):Play()
						Tween:Create(BoxStroke,TweenInfo.new(0.1),{Color = LinoriaBox.Theme.STROKE}):Play()
					end
					ConfigSystem.CurrentConfig[configKey] = val
				end

				Effect(Default)

				ToggleButton.MouseButton1Click:Connect(function()
					Default = not Default
					Effect(Default)
					callback(Default)
				end)

				Section_Box.update()

				return Signal({
					{
						name = 'Text',
						callback = function(...)
							ToggleLabel.Text = tostring(...)
						end,
					},
					{
						name = 'Fire',
						callback = callback,
					},
					{
						name = 'Value',
						callback = function(v)
							Default = v
							Effect(v)
							callback(v)
						end,
					}
				})
			end

			function Section_Box:AddKeybind(KeybindName:string,Default:Enum.KeyCode,callback)
				callback = ToDefault(callback,function() end)

				local configKey = "Keybind_" .. KeybindName

				if typeof(Default) == 'string' then
					pcall(function()
						if Enum.KeyCode[tostring(Default)] then
							Default = Enum.KeyCode[tostring(Default)]
						end
					end)
				end

				-- Load from config
				if ConfigSystem.CurrentConfig[configKey] ~= nil then
					local savedKey = ConfigSystem.CurrentConfig[configKey]
					if typeof(savedKey) == 'string' and Enum.KeyCode[savedKey] then
						Default = Enum.KeyCode[savedKey]
					end
				end

				local function toname(v:Enum.KeyCode)
					if v then
						return v.Name
					end
					return 'None'
				end

				local KeybindFrame = Instance.new("Frame")
				local KeybindLabel = Instance.new("TextLabel")
				local KeybindBox = Instance.new("TextButton")
				local KeybindText = Instance.new("TextLabel")

				KeybindFrame.Name = "Keybind"
				KeybindFrame.Parent = SectionContent
				KeybindFrame.BackgroundTransparency = 1
				KeybindFrame.Size = UDim2.new(0.95, 0, 0, 24)

				KeybindLabel.Parent = KeybindFrame
				KeybindLabel.BackgroundTransparency = 1
				KeybindLabel.Size = UDim2.new(1, -60, 1, 0)
				KeybindLabel.Font = Enum.Font.Gotham
				KeybindLabel.Text = KeybindName or "Keybind"
				KeybindLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
				KeybindLabel.TextSize = 12
				KeybindLabel.TextXAlignment = Enum.TextXAlignment.Left

				KeybindBox.Name = "Box"
				KeybindBox.Parent = KeybindFrame
				KeybindBox.AnchorPoint = Vector2.new(1, 0.5)
				KeybindBox.BackgroundColor3 = LinoriaBox.Theme.BACKGROUND
				KeybindBox.BorderSizePixel = 0
				KeybindBox.Position = UDim2.new(1, 0, 0.5, 0)
				KeybindBox.Size = UDim2.new(0, 50, 0, 20)
				KeybindBox.Font = Enum.Font.Gotham
				KeybindBox.Text = ""

				local BoxCorner = Instance.new("UICorner")
				BoxCorner.Parent = KeybindBox
				BoxCorner.CornerRadius = UDim.new(0, 3)

				local BoxStroke = Instance.new("UIStroke")
				BoxStroke.Parent = KeybindBox
				BoxStroke.Color = LinoriaBox.Theme.STROKE
				BoxStroke.Thickness = 1

				KeybindText.Parent = KeybindBox
				KeybindText.BackgroundTransparency = 1
				KeybindText.Size = UDim2.new(1, 0, 1, 0)
				KeybindText.Font = Enum.Font.GothamMedium
				KeybindText.Text = toname(Default)
				KeybindText.TextColor3 = Color3.fromRGB(200, 200, 200)
				KeybindText.TextSize = 11

				local BindConnect

				KeybindBox.MouseEnter:Connect(function()
					if BindConnect then return end
					Tween:Create(KeybindBox,TweenInfo.new(0.1),{BackgroundColor3 = LinoriaBox.Theme.TOUCH}):Play()
				end)

				KeybindBox.MouseLeave:Connect(function()
					if BindConnect then return end
					Tween:Create(KeybindBox,TweenInfo.new(0.1),{BackgroundColor3 = LinoriaBox.Theme.BACKGROUND}):Play()
				end)

				KeybindBox.MouseButton1Click:Connect(function()
					if BindConnect then return end

					KeybindText.Text = '...'
					Tween:Create(KeybindBox,TweenInfo.new(0.1),{BackgroundColor3 = LinoriaBox.Theme.SYSTEM}):Play()
					BindConnect = 'wait'
					BindConnect = UIS.InputBegan:Wait()

					if BindConnect.KeyCode ~= Enum.KeyCode.Unknown then
						KeybindText.Text = toname(BindConnect.KeyCode)
						Default = BindConnect.KeyCode
						ConfigSystem.CurrentConfig[configKey] = BindConnect.KeyCode.Name
						pcall(function()
							task.spawn(callback,BindConnect.KeyCode)
						end)
					else
						KeybindText.Text = toname(Default)
					end

					Tween:Create(KeybindBox,TweenInfo.new(0.1),{BackgroundColor3 = LinoriaBox.Theme.BACKGROUND}):Play()
					BindConnect = nil
				end)

				Section_Box.update()

				return Signal({
					{
						name = 'Text',
						callback = function(...)
							KeybindLabel.Text = tostring(...)
						end,
					},
					{
						name = 'Fire',
						callback = callback,
					},
					{
						name = 'Value',
						callback = function(v)
							Default = v
							KeybindText.Text = toname(v)
							callback(v)
						end,
					},
					{
						name = 'Get',
						callback = function()
							return Default
						end,
					},
				})
			end

			function Section_Box:AddSlider(SliderName,Value:{Min:number,Max:number,Default:number,ValueT:string},callback)
				Value = Value or {}
				Value.Min = Value.Min or 1
				Value.Max = Value.Max or 100
				Value.Default = Value.Default or Value.Min
				Value.ValueT = Value.ValueT or ''

				callback = ToDefault(callback,function() end)

				local configKey = "Slider_" .. SliderName

				-- Load from config
				if ConfigSystem.CurrentConfig[configKey] ~= nil then
					Value.Default = ConfigSystem.CurrentConfig[configKey]
				end

				local SliderFrame = Instance.new("Frame")
				local SliderLabel = Instance.new("TextLabel")
				local SliderValueLabel = Instance.new("TextLabel")
				local SliderBar = Instance.new("Frame")
				local SliderFill = Instance.new("Frame")
				local SliderButton = Instance.new("TextButton")

				SliderFrame.Name = "Slider"
				SliderFrame.Parent = SectionContent
				SliderFrame.BackgroundTransparency = 1
				SliderFrame.Size = UDim2.new(0.95, 0, 0, 38)

				SliderLabel.Parent = SliderFrame
				SliderLabel.BackgroundTransparency = 1
				SliderLabel.Position = UDim2.new(0, 0, 0, 0)
				SliderLabel.Size = UDim2.new(0.7, 0, 0, 16)
				SliderLabel.Font = Enum.Font.Gotham
				SliderLabel.Text = SliderName or "Slider"
				SliderLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
				SliderLabel.TextSize = 12
				SliderLabel.TextXAlignment = Enum.TextXAlignment.Left

				SliderValueLabel.Parent = SliderFrame
				SliderValueLabel.BackgroundTransparency = 1
				SliderValueLabel.Position = UDim2.new(0.7, 0, 0, 0)
				SliderValueLabel.Size = UDim2.new(0.3, 0, 0, 16)
				SliderValueLabel.Font = Enum.Font.GothamMedium
				SliderValueLabel.Text = tostring(Value.Default)..Value.ValueT
				SliderValueLabel.TextColor3 = LinoriaBox.Theme.MAIN
				SliderValueLabel.TextSize = 11
				SliderValueLabel.TextXAlignment = Enum.TextXAlignment.Right

				SliderBar.Name = "Bar"
				SliderBar.Parent = SliderFrame
				SliderBar.BackgroundColor3 = LinoriaBox.Theme.BACKGROUND
				SliderBar.BorderSizePixel = 0
				SliderBar.Position = UDim2.new(0, 0, 0, 20)
				SliderBar.Size = UDim2.new(1, 0, 0, 14)

				local BarCorner = Instance.new("UICorner")
				BarCorner.Parent = SliderBar
				BarCorner.CornerRadius = UDim.new(0, 3)

				local BarStroke = Instance.new("UIStroke")
				BarStroke.Parent = SliderBar
				BarStroke.Color = LinoriaBox.Theme.STROKE
				BarStroke.Thickness = 1

				SliderFill.Name = "Fill"
				SliderFill.Parent = SliderBar
				SliderFill.BackgroundColor3 = LinoriaBox.Theme.MAIN
				SliderFill.BorderSizePixel = 0
				SliderFill.Size = UDim2.fromScale((Value.Default - Value.Min) / (Value.Max - Value.Min), 1)

				local FillCorner = Instance.new("UICorner")
				FillCorner.Parent = SliderFill
				FillCorner.CornerRadius = UDim.new(0, 3)

				SliderButton.Parent = SliderFrame
				SliderButton.BackgroundTransparency = 1
				SliderButton.Position = UDim2.new(0, 0, 0, 20)
				SliderButton.Size = UDim2.new(1, 0, 0, 14)
				SliderButton.Text = ""
				SliderButton.ZIndex = 10

				local Touch = false

				local function update(Input)
					local SizeScale = math.clamp((((Input.Position.X) - SliderBar.AbsolutePosition.X) / SliderBar.AbsoluteSize.X), 0, 1)
					local Valuea = math.floor(((Value.Max - Value.Min) * SizeScale) + Value.Min)
					local Size = UDim2.fromScale(SizeScale, 1)
					SliderValueLabel.Text = tostring(Valuea)..Value.ValueT
					Tween:Create(SliderFill,TweenInfo.new(0.05),{Size = Size}):Play()
					Value.Default = Valuea
					ConfigSystem.CurrentConfig[configKey] = Valuea
					callback(Valuea)
				end

				SliderButton.InputBegan:Connect(function(Input)
					if Input.UserInputType == Enum.UserInputType.MouseButton1 or Input.UserInputType == Enum.UserInputType.Touch then
						Touch = true
						update(Input)
					end
				end)

				SliderButton.InputEnded:Connect(function(Input)
					if Input.UserInputType == Enum.UserInputType.MouseButton1 or Input.UserInputType == Enum.UserInputType.Touch then
						Touch = false
					end
				end)

				UIS.InputChanged:Connect(function(Input)
					if Touch then
						if (Input.UserInputType==Enum.UserInputType.MouseMovement or Input.UserInputType==Enum.UserInputType.Touch) then
							update(Input)
						end
					end
				end)

				Section_Box.update()

				return Signal({
					{
						name = 'Text',
						callback = function(...)
							SliderLabel.Text = tostring(...)
						end,
					},
					{
						name = 'Fire',
						callback = callback,
					},
					{
						name = 'Value',
						callback = function(v)
							Value.Default = v
							local Size = UDim2.fromScale((v - Value.Min) / (Value.Max - Value.Min), 1)
							SliderValueLabel.Text = tostring(v)..Value.ValueT
							Tween:Create(SliderFill,TweenInfo.new(0.1),{Size = Size}):Play()
							callback(v)
						end,
					},
					{
						name = 'Get',
						callback = function()
							return Value.Default
						end,
					},
				})
			end

			function Section_Box:AddDropdown(DropdownName:string,DropdownInfo:{any},DropdownDefault:any,callback)
				DropdownInfo = DropdownInfo or {}
				DropdownDefault = DropdownDefault or DropdownInfo[1]

				local configKey = "Dropdown_" .. DropdownName

				-- Load from config
				if ConfigSystem.CurrentConfig[configKey] ~= nil then
					DropdownDefault = ConfigSystem.CurrentConfig[configKey]
				end

				local DropdownFrame = Instance.new("Frame")
				local DropdownLabel = Instance.new("TextLabel")
				local DropdownBox = Instance.new("TextButton")
				local DropdownValue = Instance.new("TextLabel")
				local DropdownIcon = Instance.new("ImageLabel")
				local DropdownList = Instance.new("Frame")
				local DropdownScroll = Instance.new("ScrollingFrame")
				local UIListLayout = Instance.new("UIListLayout")

				local DOPWN = 'rbxassetid://7733717447'
				local UP = 'rbxassetid://7072706796'

				DropdownFrame.Name = "Dropdown"
				DropdownFrame.Parent = SectionContent
				DropdownFrame.BackgroundTransparency = 1
				DropdownFrame.Size = UDim2.new(0.95, 0, 0, 24)
				DropdownFrame.ClipsDescendants = false

				DropdownLabel.Parent = DropdownFrame
				DropdownLabel.BackgroundTransparency = 1
				DropdownLabel.Size = UDim2.new(1, 0, 0, 12)
				DropdownLabel.Font = Enum.Font.Gotham
				DropdownLabel.Text = DropdownName or "Dropdown"
				DropdownLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
				DropdownLabel.TextSize = 12
				DropdownLabel.TextXAlignment = Enum.TextXAlignment.Left

				DropdownBox.Name = "Box"
				DropdownBox.Parent = DropdownFrame
				DropdownBox.BackgroundColor3 = LinoriaBox.Theme.BACKGROUND
				DropdownBox.BorderSizePixel = 0
				DropdownBox.Position = UDim2.new(0, 0, 0, 14)
				DropdownBox.Size = UDim2.new(1, 0, 0, 22)
				DropdownBox.Text = ""
				DropdownBox.ZIndex = 10

				local BoxCorner = Instance.new("UICorner")
				BoxCorner.Parent = DropdownBox
				BoxCorner.CornerRadius = UDim.new(0, 3)

				local BoxStroke = Instance.new("UIStroke")
				BoxStroke.Parent = DropdownBox
				BoxStroke.Color = LinoriaBox.Theme.STROKE
				BoxStroke.Thickness = 1

				DropdownValue.Parent = DropdownBox
				DropdownValue.BackgroundTransparency = 1
				DropdownValue.Position = UDim2.new(0, 6, 0, 0)
				DropdownValue.Size = UDim2.new(1, -26, 1, 0)
				DropdownValue.Font = Enum.Font.Gotham
				DropdownValue.Text = tostring(DropdownDefault or 'None')
				DropdownValue.TextColor3 = Color3.fromRGB(200, 200, 200)
				DropdownValue.TextSize = 11
				DropdownValue.TextXAlignment = Enum.TextXAlignment.Left

				DropdownIcon.Parent = DropdownBox
				DropdownIcon.AnchorPoint = Vector2.new(1, 0.5)
				DropdownIcon.BackgroundTransparency = 1
				DropdownIcon.Position = UDim2.new(1, -6, 0.5, 0)
				DropdownIcon.Size = UDim2.new(0, 14, 0, 14)
				DropdownIcon.Image = DOPWN

				DropdownList.Name = "List"
				DropdownList.Parent = DropdownFrame
				DropdownList.BackgroundColor3 = LinoriaBox.Theme.SECTION
				DropdownList.BorderSizePixel = 0
				DropdownList.Position = UDim2.new(0, 0, 0, 38)
				DropdownList.Size = UDim2.new(1, 0, 0, 0)
				DropdownList.Visible = false
				DropdownList.ZIndex = 20
				DropdownList.ClipsDescendants = true

				local ListCorner = Instance.new("UICorner")
				ListCorner.Parent = DropdownList
				ListCorner.CornerRadius = UDim.new(0, 3)

				local ListStroke = Instance.new("UIStroke")
				ListStroke.Parent = DropdownList
				ListStroke.Color = LinoriaBox.Theme.STROKE
				ListStroke.Thickness = 1

				DropdownScroll.Parent = DropdownList
				DropdownScroll.Active = true
				DropdownScroll.BackgroundTransparency = 1
				DropdownScroll.Position = UDim2.new(0, 4, 0, 4)
				DropdownScroll.Size = UDim2.new(1, -8, 1, -8)
				DropdownScroll.CanvasSize = UDim2.new(0, 0, 0, 0)
				DropdownScroll.ScrollBarThickness = 4
				DropdownScroll.ScrollBarImageColor3 = LinoriaBox.Theme.MAIN

				UIListLayout.Parent = DropdownScroll
				UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
				UIListLayout.Padding = UDim.new(0, 2)

				scrolling_connect(DropdownScroll)

				local function getItemHeight()
					local height = 8
					for i,v in ipairs(DropdownScroll:GetChildren()) do
						if v:IsA('TextButton') then
							height = height + v.AbsoluteSize.Y + UIListLayout.Padding.Offset
						end
					end
					return math.min(height, 120)
				end

				local function Toggle(open)
					if open then
						DropdownIcon.Image = UP
						DropdownList.Visible = true
						Tween:Create(DropdownList,TweenInfo.new(0.15),{
							Size = UDim2.new(1, 0, 0, getItemHeight())
						}):Play()
						Tween:Create(DropdownBox,TweenInfo.new(0.15),{BackgroundColor3 = LinoriaBox.Theme.TOUCH}):Play()
					else
						DropdownIcon.Image = DOPWN
						Tween:Create(DropdownList,TweenInfo.new(0.15),{
							Size = UDim2.new(1, 0, 0, 0)
						}):Play()
						Tween:Create(DropdownBox,TweenInfo.new(0.15),{BackgroundColor3 = LinoriaBox.Theme.BACKGROUND}):Play()
						delay(0.15, function()
							DropdownList.Visible = false
						end)
					end
				end

				local function Render()
					for i,v in ipairs(DropdownScroll:GetChildren()) do
						if v:IsA('TextButton') then
							v:Destroy()
						end
					end

					for i,v in pairs(DropdownInfo) do
						local OptionButton = Instance.new("TextButton")
						local OptionCheck = Instance.new("Frame")

						OptionButton.Name = "Option"
						OptionButton.Parent = DropdownScroll
						OptionButton.BackgroundColor3 = LinoriaBox.Theme.BACKGROUND
						OptionButton.BackgroundTransparency = 1
						OptionButton.BorderSizePixel = 0
						OptionButton.Size = UDim2.new(1, 0, 0, 20)
						OptionButton.Font = Enum.Font.Gotham
						OptionButton.Text = "  " .. tostring(v)
						OptionButton.TextColor3 = Color3.fromRGB(200, 200, 200)
						OptionButton.TextSize = 11
						OptionButton.TextXAlignment = Enum.TextXAlignment.Left
						OptionButton.ZIndex = 25

						OptionCheck.Name = "Check"
						OptionCheck.Parent = OptionButton
						OptionCheck.AnchorPoint = Vector2.new(1, 0.5)
						OptionCheck.BackgroundColor3 = LinoriaBox.Theme.MAIN
						OptionCheck.BorderSizePixel = 0
						OptionCheck.Position = UDim2.new(1, 0, 0.5, 0)
						OptionCheck.Size = UDim2.new(0, v == DropdownDefault and 3 or 0, 0, 16)

						local CheckCorner = Instance.new("UICorner")
						CheckCorner.Parent = OptionCheck
						CheckCorner.CornerRadius = UDim.new(0, 2)

						OptionButton.MouseButton1Click:Connect(function()
							for _,btn in pairs(DropdownScroll:GetChildren()) do
								if btn:IsA('TextButton') and btn:FindFirstChild('Check') then
									Tween:Create(btn.Check,TweenInfo.new(0.1),{Size = UDim2.new(0, 0, 0, 16)}):Play()
								end
							end

							Tween:Create(OptionCheck,TweenInfo.new(0.1),{Size = UDim2.new(0, 3, 0, 16)}):Play()
							DropdownDefault = v
							DropdownValue.Text = tostring(v)
							ConfigSystem.CurrentConfig[configKey] = v
							callback(v)
							Toggle(false)
						end)

						OptionButton.MouseEnter:Connect(function()
							Tween:Create(OptionButton,TweenInfo.new(0.1),{BackgroundTransparency = 0.8, TextColor3 = Color3.fromRGB(255, 255, 255)}):Play()
						end)

						OptionButton.MouseLeave:Connect(function()
							Tween:Create(OptionButton,TweenInfo.new(0.1),{BackgroundTransparency = 1, TextColor3 = Color3.fromRGB(200, 200, 200)}):Play()
						end)
					end
				end

				local isOpen = false

				Render()

				DropdownBox.MouseButton1Click:Connect(function()
					isOpen = not isOpen
					Toggle(isOpen)
				end)

				Section_Box.update()

				return Signal({
					{
						name = 'Text',
						callback = function(...)
							DropdownLabel.Text = tostring(...)
						end,
					},
					{
						name = 'Fire',
						callback = callback,
					},
					{
						name = 'Value',
						callback = function(v)
							DropdownDefault = v
							DropdownValue.Text = tostring(v)
							callback(v)
						end,
					},
					{
						name = 'Get',
						callback = function()
							return DropdownDefault
						end,
					},
					{
						name = 'Refresh',
						callback = function(value)
							DropdownInfo = value
							Render()
						end,
					},
				})
			end

			Section_Box.update()

			return Section_Box
		end

		return TabBox
	end

	function BoxWindow:NewSize(v)
		BoxWindow.Size = v
		MainFrame.Size = v
	end

	function BoxWindow:SetConfigName(name)
		BoxWindow.ConfigName = name
	end

	function BoxWindow:SaveConfig(name)
		return SaveConfig(name or BoxWindow.ConfigName)
	end

	function BoxWindow:LoadConfig(name)
		local data = LoadConfig(name or BoxWindow.ConfigName)
		if data then
			-- Refresh all elements with loaded data
			print("Config loaded successfully")
		end
		return data
	end

	-- UI Toggle System
	local Status = true
	local buton = cretate_button(Frame)
	buton.Visible = false

	UIS.InputBegan:Connect(function(input)
		if input.KeyCode == BoxWindow.Toggle then
			Status = not Status
			MainFrame.Visible = Status
			if not Status then
				SaveConfig(BoxWindow.ConfigName)
			end
		end
	end)

	CloseButton.MouseButton1Click:Connect(function()
		Status = not Status
		MainFrame.Visible = Status
		if not Status then
			SaveConfig(BoxWindow.ConfigName)
		end
	end)

	-- Dragging System
	local dragToggle = nil
	local dragSpeed = 0.13
	local dragStart = nil
	local startPos = nil

	local function updateInput(input)
		local delta = input.Position - dragStart
		local position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X,
			startPos.Y.Scale, startPos.Y.Offset + delta.Y)
		Tween:Create(MainFrame, TweenInfo.new(dragSpeed), {Position = position}):Play()
	end

	TopBar.InputBegan:Connect(function(input)
		if (input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch) then 
			dragToggle = true
			dragStart = input.Position
			startPos = MainFrame.Position
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragToggle = false
				end
			end)
		end
	end)

	UIS.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
			if dragToggle then
				updateInput(input)
			end
		end
	end)

	-- Load config on startup
	LoadConfig(BoxWindow.ConfigName)

	return BoxWindow
end

function LinoriaBox:LoopUpdate()
	task.spawn(function()
		while true do task.wait()
			pcall(function()
				for i,v in ipairs(LinoriaBox.AutoUpdate) do task.wait()
					pcall(v)
				end
			end)
		end
	end)
end

return LinoriaBox
